/* =====================================================================
 * Base styles
 * ===================================================================== */

html, body {
  height: 100%;
  max-height: 100%;
}

body {
  padding: 0;
  margin: 0;
  background: $cream;
}

// Kill transitions before page load
.preload * { transition: none !important; }

// Border box FTW
* { box-sizing: border-box; }

.row {
  display: table;
  table-layout: fixed;
  min-width: 100%;
}

// Main content
.content {
  position: relative;
  width: 100%;
}

// Columns
.column {
  vertical-align: top;
  display: table-cell;

  :last-child { margin-bottom: 0; }
}

// Responsive images
figure, img {
  max-width: 100%;
  vertical-align: top;
}


/* ============================================================
 * Header & Navbar
 * ============================================================ */

.branding {
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 6rem;
  line-height: 6rem;
  font-size: 1.4rem;
  z-index: 999;
  transform: translateY(0);
  transform: translate3d(0,0,0);
  transition: .25s transform;
  backface-visibility: hidden;
  background: $red;
}

.heads-up {
  transform: translateY(-6rem);
  transform: translate3d(0,-6rem,0);
}

.branding .logo {
  display: block;
  float: left;
  font-size: 0;
  padding: 0;
  margin: 0 0 0 1.3rem;

  a {
    display: block;
    width: 12.8rem;
    height: 6rem;
    background: url('../images/logo-landscape-white.svg') no-repeat center;
  }
}

.main-nav {
  float: right;

  ul {
    margin: 0;
    padding: 0;
    list-style: none;
  }

  li {
    display: block;
    float: left;

    a {
      color: $white;
      display: inline-block;
      height: 3.8rem;
      line-height: 3.8rem;
      padding: 0 1.6rem;
      margin: 0 1rem 0 0;
      font-weight: 400;
      text-align: center;
      border-radius: 3px;
      background: rgba($white, .25);
      transition: .15s all;

      .icon-github {
        position: relative;
        top: .4rem;
        font-size: 2.2rem;
        margin: 0 .8rem 0 0;
      }

      &:hover, &:active, &:focus{
        color: $red;
        border-color: transparent;
        background: rgba($white, 1);
      }
    }
  }
}


/* =====================================================================
 * Site footer
 * ===================================================================== */

.colophon {
  background: $black;
  font-size: 1.6rem;
  width: 96rem;
  margin: 0 auto;
  box-sizing: content-box;
  padding: 9rem calc(50% - 48rem);

  h5 {
    color: $liteblack;
    margin: 0 0 1.6rem 0;
  }

  li {
    list-style: none;
    line-height: 2;
  }

  .copyright {
    text-align: center;
    font-size: 1.4rem;
    margin: 0;
  }
}


/* =====================================================================
 * Content sections
 * ===================================================================== */

// Opacity pulse animation
@keyframes pulse {
  0%, 100% { opacity: .25; }
  50%      { opacity:  1;  }
}

.content > section {
  width: 66rem;
  margin: 0 auto;
  overflow: hidden;
  box-sizing: content-box;
  padding: 12rem calc(50% - 33rem);

  &:first-of-type { padding-top: 18rem; }

  // Narrow layout
  &.narrow { width: 600px; }

  // Wide layout
  &.wide {
    width: 96rem;
    margin: 0 auto;
    box-sizing: content-box;
    padding-left: calc(50% - 48rem);
    padding-right: calc(50% - 48rem);

    .normal-width {
      max-width: 66rem;
      margin-left: auto;
      margin-right: auto;
    }
  }

  // Full-width layout
  &.full-width {
    max-width: none;
    width: 100%;
  }

  // Tall layout
  &.tall {
    padding-top: 18rem;
    padding-bottom: 18rem;
  }

  // Short layout
  &.short {
    padding-top: 8rem;
    padding-bottom: 8rem;
  }

  // Colored sections
  &.red    { background-color: $red;    }
  &.blue   { background-color: $blue;   }
  &.gray   { background-color: $gray;   }
  &.green  { background-color: $green;  }
  &.white  { background-color: $white;  }
  &.black  { background-color: $black;  }
  &.yellow { background-color: $yellow; }
  &.orange { background-color: $orange; }
  &.purple { background-color: $purple; }

  // Light-on-dark color schemes
  &.red, &.blue, &.green, &.black, &.orange, &.purple, &.gray, &.yellow {
    color: rgba($white, .55);
    th, h1, h2, h3, h4, h5, h6, { color: $white; }
  }

  // Banner sections
  &.banner {
    padding-bottom: 15rem;

    h1, h2, h3, h4, h5, h6 { color: $white; }

    p {
      max-width: 600px;
      margin-top: -2rem;
      color: rgba($white, .6);
      font-size: 1.8rem;
      line-height: 1.8;

      &.center-text {
        margin-left: auto;
        margin-right: auto;
      }
    }

    &.center-text {
      p {
        margin-left: auto;
        margin-right: auto;
      }
    }

    &.white {
      h1, h2, h3, h4, h5, h6 { color: $black; }
    }
  }

  // Landing hero
  &.landing-hero {
    text-align: center;
    position: relative;
    width: 100%;
    padding: 0;
    // background: $cream;
    // background: #E6E9ED url('../images/iphone-white.jpg') no-repeat center bottom;
    background-size: cover;

    > div {
      display: table;
      width: 100%;
      height: auto;
      margin: auto;
      position: absolute;
      top: -6rem;
      left: 0;
      bottom: 0;
      right: 0;

      h1 {
        margin: 0;
        width: 100%;
        max-width: 30rem;
        height: 20rem;
        background: url('../images/authful.svg') no-repeat center;
        background-size: 100% auto;
      }

      p {
        color: $black;
        font-size: 2.4rem;
        max-width: 30rem;
        margin: 2rem auto 0 auto;

        a {
          display: inline-block;
          margin: 3rem 0 0 0;
          font-size: 1.6rem;
        }

        span {
          position: relative;
          top: .2rem;
          margin: 0 .2rem;
        }
      }
    }

    .scroll-trigger {
      width: 4rem;
      height: 4rem;
      font-size: 4rem;
      position: absolute;
      bottom: 4rem;
      left: 50%;
      color: $red;
      margin: 0 0 0 -2.5rem;
      animation: pulse 2s infinite;

      &:hover { animation: none; }
    }
  }

  // Remove margin/padding from first element
  > *:first-child,
  > *:first-child > *:first-child,
  > *:first-child > *:first-child {
    margin-top: 0;
    padding-top: 0;

    &.title-bar { padding-top: 40px; }
  }

  // Remove margin/padding from last element
  > *:last-child,
  > *:last-child > *:last-child,
  > *:last-child > *:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
  }

  // Extra margin on horizontal rules
  hr { margin: 9rem 0; }
}


/* =====================================================================
 * Column spacing
 * ===================================================================== */

.column {
  padding-left: 1.5%;
  padding-right: 1.5%;

  &.no-alley      { padding-left: 0;     padding-right: 0;      }
  &.small-alley   { padding-left: 1.0%;  padding-right: 1.0%;   }
  &.normal-alley  { padding-left: 1.75%; padding-right: 1.75%;  }
  &.large-alley   { padding-left: 2.5%;  padding-right: 2.5%;   }
  &.larger-alley  { padding-left: 3.5%;  padding-right: 3.5%;   }

  &:first-of-type {
    padding-left: 0;
    padding-right: 3.5%;

    &.no-alley        { padding-right: 0;    }
    &.small-alley     { padding-right: 2%;   }
    &.normal-alley    { padding-right: 3.5%; }
    &.large-alley     { padding-right: 5%;   }
    &.larger-alley    { padding-right: 7%;   }
    &[class*="-icon"] { padding-right: 1rem; }
  }

  &:last-of-type  {
    padding-right: 0;
    padding-left: 3%;

    &.no-alley        { padding-left: 0;    }
    &.small-alley     { padding-left: 2%;   }
    &.normal-alley    { padding-left: 3.5%; }
    &.large-alley     { padding-left: 5%;   }
    &.larger-alley    { padding-left: 7%;   }
    &[class*="-icon"] { padding-left: 1rem; }
  }
}


/* =====================================================================
 * Colored cards
 * ===================================================================== */

*[class*="card"] {
  padding: 3rem;

  > *:last-child,
  > *:last-child > *:last-child,
  > *:last-child > *:last-child > *:last-child { margin-bottom: 0; }
}

.white-card {
  background: $white;
  border: .2rem solid rgba($black, .05);
}

.gray-card { background: $gray; }

.black-card {
  color: $gray;
  background: $black;

  th, td { border-top-color: $liteblack; }

  th, h1, h2, h3, h4, h5, h6, { color: $litegray; }
}

.outline-card { border: .3rem solid rgba($black, .15); }


/* =====================================================================
 * Tables
 * ===================================================================== */

table {
  width: 100%;
  max-width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  font-size: 1.7rem;

  &.striped tbody tr:nth-child(odd) { background: rgba($black, .02); }

  a:hover, a:active, a:focus { color: $black; }
}

th {
  color: $black;
  vertical-align: bottom;
}

th, td {
  line-height: 1.8rem;
  text-align: center;
  vertical-align: middle;
  padding: 2.2rem 1rem;
  border-top: .2rem solid rgba($black, .035);
}

td { vertical-align: top; }

thead:first-child tr th,
thead:first-child tr td { border-top: 0; }

tfoot td {
  color: $gray;
  background: $black;
  border-color: transparent;
  padding: 3rem .8rem;
}


/* ==========================================================================
 * Forms
 * ========================================================================== */

form {

  fieldset {
    border: none;
    padding: 0;
    margin: 0;
  }

  legend {
    font-size: 3.2rem;
    color: $black;
    line-height: 1.325;
    font-weight: 200;
    margin: 0 0 3rem 0;
  }

  label {
    display: inline-block;
    font-size: 1.6rem;
    font-style: italic;
    margin: 3rem 0 .6rem 0;

    &:first-of-type { margin-top: 0; }
  }

  h2 {
    font-weight: 400;
    font-size: 2.4rem;
    margin: 0;
  }

}

input {
  outline: none;
  width: 100%;
  border: .2rem solid $litegray;
  border-radius: .3rem;
  padding: 1rem 1.4rem;
  transition: .15s border-color;

  &:focus {
    color: $black;
    border-color: $black;
  }
}

// Placeholder text
::-webkit-input-placeholder { color: $liteblack; }
:-moz-placeholder           { color: $liteblack; }
::-moz-placeholder          { color: $liteblack; }
:-ms-input-placeholder      { color: $liteblack; }

:focus::-webkit-input-placeholder { color: $black; }
:focus:-moz-placeholder           { color: $black; }
:focus::-moz-placeholder          { color: $black; }
:focus:-ms-input-placeholder      { color: $black; }


/* ==========================================================================
 * Modals
 * ========================================================================== */

.modal {
  visibility: hidden;
  opacity: 0;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  margin: auto;
  display: table;
  width: 83.5%;
  max-width: 66rem;
  min-width: 32rem;
  height: auto;
  z-index: 2000;
  overflow: hidden;
  background: $white;
  border-radius: .3rem;
  transform: scale(2);
  transition: .25s all;
  backface-visibility: hidden;

  // Header
  .modal-header {
    padding: 3rem;
    text-align: center;
    border-bottom: .2rem solid $litegray;

    > * { margin: 0; }
  }

  // Content
  .modal-content {
    padding: 3rem;
    font-size: 1.6rem;

    h1, h2, h3, h4, h5, h6,
    p, table, ul, ol, dl, img { margin: 0 0 2rem 0; }

    // Remove padding
    &.flush { padding: 0; }

    // Remove margin/padding from first element
    > *:first-child,
    > *:first-child > *:first-child,
    > *:first-child > *:first-child {
      margin-top: 0;
      padding-top: 0;

      &.title-bar { padding-top: 40px; }
    }

    // Remove margin/padding from last element
    > *:last-child,
    > *:last-child > *:last-child,
    > *:last-child > *:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
    }
  }
}

// Visible state
.modal-show {
  visibility: visible;
  opacity: 1;
  transform: scale(1);
}

// Body overlay
.modal-overlay {
  position: fixed;
  width: 100%;
  height: 100%;
  visibility: hidden;
  top: 0;
  left: 0;
  z-index: 1000;
  opacity: 0;
  background: rgba($black, .9);
  transition: .25s all;
}

// Overlay visible state
.modal-show ~ .modal-overlay {
  opacity: 1;
  visibility: visible;
}

// Close button
.modal-close {
  position: absolute;
  top: 0;
  right: 0;
  font-size: 2.6rem;
  padding: .1rem 1.2rem;
  transition: .15s color;

  &:hover { color: $red; }
}


/* =====================================================================
 * Element dimensions
 * ===================================================================== */

.one-fifth     { width: 20%;     }
.one-fourth    { width: 25%;     }
.two-fifths    { width: 40%;     }
.one-third     { width: 33.333%; }
.one-half      { width: 50%;     }
.three-fifths  { width: 60%;     }
.two-thirds    { width: 66.666%; }
.three-fourths { width: 75%;     }
.four-fifths   { width: 80%;     }
.full-width    { max-width: none; width: 100%; }


/* =====================================================================
 * Element alignment
 * ===================================================================== */

.flush-top      { vertical-align: top;    }
.flush-bottom   { vertical-align: bottom; }

.flush-left  { float: left;  }
.flush-right { float: right; }

.center-vertically {
  vertical-align: middle;

  > *:last-child,
  > * > *:last-child,
  > * > * > *:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
  }
}

.center-horizontally {
  margin-left: auto;
  margin-right: auto;
}


/* =====================================================================
 * Element margin (gutter) control
 * ===================================================================== */

.smaller-gutter { margin-bottom: 2rem;  }
.small-gutter   { margin-bottom: 3rem;  }
.normal-gutter  { margin-bottom: 5rem;  }
.large-gutter   { margin-bottom: 6rem;  }
.larger-gutter  { margin-bottom: 15rem; }


/* ==========================================================================
 * Helper classes
 * ========================================================================== */

// Image replacement
.ir {
  display: inline-block;
  border: 0;
  font: 0/0 a;
  text-shadow: none;
  color: transparent;
}

// Hide from both screenreaders and browsers
.hidden {
  display: none !important;
  visibility: hidden;
}

// Hide only visually, but have it available for screenreaders
.visually-hidden {
  border: 0;
  clip: rect(0 0 0 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;

  // Allows the element to be focusable when navigated to via the keyboard
  &.focusable:active, &.focusable:focus {
    clip: auto;
    height: auto;
    margin: 0;
    overflow: visible;
    position: static;
    width: auto;
  }
}

// Hide visually and from screenreaders, but maintain layout
.invisible { visibility: hidden; }


/* =====================================================================
 * Media queries
 * ===================================================================== */

// Screens smaller than 700px wide
 @media screen and (max-width: 700px) {

  .row, .column {
    display: block;
    width: 100%;
    margin: 0 0 4rem 0;
  }
  .content > section,
  .content > section.tall,
  .content > section.short {
    padding-top: 9rem;
    padding-bottom: 9rem;

    .title-bar { top: -9rem; }
  }

}

// Screens smaller than 785px wide
@media (max-width: 785px) {

  .content > section {
    width: 100%;
    padding: 12rem 8.25%;
    box-sizing: border-box;
  }

}

// Screens smaller than 1150px wide
@media screen and (max-width: 1150px) {

  .content > section.wide, .colophon {
    width: 100%;
    padding-left: 8.25%;
    padding-right: 8.25%;
    box-sizing: border-box;
  }

}